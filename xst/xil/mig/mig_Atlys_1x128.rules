# EMACS settings: -*-	tab-width: 2; indent-tabs-mode: t -*-
# vim: tabstop=2:shiftwidth=2:noexpandtab
# kate: tab-width 2; replace-tabs off; indent-width 2;
# ==============================================================================
# Note: all files are relative to PoC root directory
#
PreProcessRules
	# Empty
End PreProcessRules

PostProcessRules
	Copy "${SPECIAL:OutputDir}/${TopModule}.ngc"														To "${PoC:nlDir}/${SPECIAL:Device}/${relDir}/${TopModule}.ngc"
	Copy "${PoC:nlDir}/${SPECIAL:Device}/${relDir}/${TopModule}_top.vhd"		To "${PoC:nlDir}/${SPECIAL:Device}/${relDir}/${TopModule}.vhdl"
	
	# first 2 lines with option "d"
	File "${PoC:nlDir}/${SPECIAL:Device}/${relDir}/${TopModule}.vhdl"
		Replace "(architecture arc of ${TopModule} is).*(end  arc;)"	With "\1\nbegin\n\2"	Options DotAll
		Replace "generic.*port"																				With "port"						Options DotAll
		Replace "C3_NUM_DQ_PINS"																			With "16"
		Replace "C3_MEM_ADDR_WIDTH"																		With "13"
		Replace "C3_MEM_BANKADDR_WIDTH"																With "3"
		Replace "C3_P0_MASK_SIZE"																			With "16"
		Replace "C3_P0_DATA_PORT_SIZE"																With "128"
	End File
End PostProcessRules
